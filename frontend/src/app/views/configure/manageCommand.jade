.modal.fade.configureModal.addRemove(tabindex="-1", role="dialog", ng-controller="configureManageCtrl")
    .modal-dialog
        .modal-content
            .modal-header
                button.close(type='button', data-dismiss='modal', aria-label='Close')
                    span(aria-hidden='true', ng-click = "back('/things')") x
                h4.modal-title Manage command
            .modal-body

                .col-lg-6(ng-repeat="command in commands track by $index")

                    .docs(ng-if="command.isNew")
                        .input-group
                            span.input-group-btn
                                button.btn.btn-success.dropdown-toggle(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false')
                                    | Thing
                                    span.caret

                                ul.dropdown-menu.dropdown-menu-right
                                    li(ng-repeat="item in commands track by $index")
                                        a(ng-click="addToStack(command, item.point)") {{item.point}}

                            input.form-control(type='text', aria-label='...',  ng-model="command.pattern", required)
                            .input-group-btn
                                button.btn.btn-default.dropdown-toggle(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false')
                                    | Action
                                    span.caret
                                ul.dropdown-menu.dropdown-menu-right
                                    li
                                        a(ng-click='removeFromStack(commands, command)') Remove


                    .docs(ng-repeat="doc in command.classifier")

                        .input-group
                            span.input-group-btn
                                button.btn.dropdown-toggle(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false', ng-class="doc.action == null ? 'btn-danger' : 'btn-default'")
                                    | {{  doc.action || 'Command'}}
                                    span.caret

                                ul.dropdown-menu.dropdown-menu-right
                                    li(ng-repeat="item in availableCommands[$parent.$index] track by $index")
                                        a(ng-click="setComAction($parent.$parent.$index, $parent.$index, item)") {{item}}

                            input.form-control(type='text', aria-label='...',  ng-model="doc.pattern", required)
                            .input-group-btn
                                button.btn.dropdown-toggle(type='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false', ng-class="doc.isNew ? 'btn-primary' : 'btn-default'")
                                    | Action
                                    span.caret
                                ul.dropdown-menu.dropdown-menu-right
                                    li(ng-if="doc.isNew")
                                        a(ng-click="modify(command)", data-dismiss='modal') Add
                                    li(ng-if="doc.isNew == null")
                                        a(ng-click="modify(command)", data-dismiss='modal') Modify
                                    li
                                        a(ng-click='doc.isNew ? removeFromStack(command.classifier, doc) : remove(command)') Remove


            .modal-footer
                button.btn.btn-primary(type='button', ng-click="commands.push({isNew: true})") Add